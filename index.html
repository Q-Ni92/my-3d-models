<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3D –ú–æ–¥–µ–ª–∏ ‚Äî AR –ü—Ä–∏–º–µ—Ä–∫–∞</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
      background: #f5f5f5;
      color: #333;
    }

    /* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Äî —Å–µ—Ç–∫–∞ */
    #home-screen {
      display: block;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .model-card {
      aspect-ratio: 1 / 1;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      cursor: pointer;
      position: relative;
      background: white;
    }

    .model-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .model-card h3 {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 12px;
      text-align: center;
      font-size: 16px;
    }

    /* –≠–∫—Ä–∞–Ω –º–æ–¥–µ–ª–∏ */
    #model-screen {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      z-index: 1000;
    }

    #back-button {
      position: absolute;
      top: 16px;
      left: 16px;
      z-index: 2000;
      background: white;
      border: 2px solid #4285f4;
      color: #4285f4;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    model-viewer {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>

  <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
  <div id="home-screen">
    <div class="grid">
      <!-- –ö–Ω–æ–ø–∫–∞ 1 -->
      <div class="model-card" data-model="JJ">
        <img src="assets/images/JJ.jpg" alt="JJ">
        <h3>JJ</h3>
      </div>
      <!-- –ö–Ω–æ–ø–∫–∞ 2 -->
      <div class="model-card" data-model="Shoker">
        <img src="assets/images/Shoker.jpg" alt="Shoker">
        <h3>Shoker</h3>
      </div>
      <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –∑–∞–≥–ª—É—à–∫–∏ -->
      <div class="model-card dev">
        <img src="assets/images/placeholder.jpg" alt="–°–∫–æ—Ä–æ">
        <h3>–ú–æ–¥–µ–ª—å 3</h3>
      </div>
      <div class="model-card dev">
        <img src="assets/images/placeholder.jpg" alt="–°–∫–æ—Ä–æ">
        <h3>–ú–æ–¥–µ–ª—å 4</h3>
      </div>
      <div class="model-card dev">
        <img src="assets/images/placeholder.jpg" alt="–°–∫–æ—Ä–æ">
        <h3>–ú–æ–¥–µ–ª—å 5</h3>
      </div>
      <div class="model-card dev">
        <img src="assets/images/placeholder.jpg" alt="–°–∫–æ—Ä–æ">
        <h3>–ú–æ–¥–µ–ª—å 6</h3>
      </div>
      <div class="model-card dev">
        <img src="assets/images/placeholder.jpg" alt="–°–∫–æ—Ä–æ">
        <h3>–ú–æ–¥–µ–ª—å 7</h3>
      </div>
      <div class="model-card dev">
        <img src="assets/images/placeholder.jpg" alt="–°–∫–æ—Ä–æ">
        <h3>–ú–æ–¥–µ–ª—å 8</h3>
      </div>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω 3D -->
  <div id="model-screen">
    <button id="back-button">‚Üê</button>
    <model-viewer
      id="viewer"
      ar
      ar-modes="webxr scene-viewer quick-look"
      camera-controls
      shadow-intensity="1"
      autoplay
      touch-action="pan-y"
    >
      <button slot="ar-button" style="position: absolute; bottom: 24px; left: 50%; transform: translateX(-50%); z-index: 100;">
        üëì –ü—Ä–æ—Å–º–æ—Ç—Ä –≤ AR
      </button>
    </model-viewer>
  </div>

  <script>
    // –ú–æ–¥–µ–ª–∏
    const models = {
      JJ: {
        glb: 'https://q-ni92.github.io/my-3d-models/JJ.glb',
        usdz: 'https://q-ni92.github.io/my-3d-models/JJ.usdz'
      },
      Shoker: {
        glb: 'https://q-ni92.github.io/my-3d-models/Shoker.glb',
        usdz: 'https://q-ni92.github.io/my-3d-models/Shoker.usdz'
      }
    };

    const homeScreen = document.getElementById('home-screen');
    const modelScreen = document.getElementById('model-screen');
    const viewer = document.getElementById('viewer');
    const backButton = document.getElementById('back-button');

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º
    document.querySelectorAll('.model-card').forEach(card => {
      card.addEventListener('click', () => {
        if (card.classList.contains('dev')) {
          alert('–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
          return;
        }

        const modelName = card.getAttribute('data-model');
        const model = models[modelName];

        if (!model) return;

        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º viewer
        viewer.setAttribute('src', model.glb);
        viewer.setAttribute('ios-src', model.usdz);

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –º–æ–¥–µ–ª–∏
        homeScreen.style.display = 'none';
        modelScreen.style.display = 'block';

        // –ñ–¥—ë–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º AR
        viewer.addEventListener('load', () => {
          if (!viewer.arSupported) {
            setTimeout(() => {
              alert('–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. –ü–æ–∏—â–∏—Ç–µ –ø–æ–Ω–æ–≤–µ–µ.');
            }, 1000);
          }
        }, { once: true });
      });
    });

    // –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é
    backButton.addEventListener('click', () => {
      modelScreen.style.display = 'none';
      homeScreen.style.display = 'block';
    });
  </script>
</body>
</html>